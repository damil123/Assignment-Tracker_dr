<!-- include header and set page title -->
<%- include("partials/header", { title: "Edit Assignment" }) %>

<section class="py-4">
  <div class="container">

    <!-- page title -->
    <h1 class="mb-4">
      <i class="bi bi-pencil-square me-2"></i>Edit Assignment
    </h1>

    <!-- dark box that holds the edit form -->
    <div class="p-4 rounded-3 border border-secondary bg-black">

      <!-- form submits updated assignment data -->
      <form action="/assignments/edit/<%= assignment._id %>" method="POST">

        <!-- course name -->
        <div class="mb-3">
          <label for="courseName" class="form-label">Course Name *</label>
          <input
            type="text"
            class="form-control bg-dark text-light border-secondary"
            id="courseName"
            name="courseName"
            value="<%= assignment.courseName %>"
            required
          >
        </div>

        <!-- title field -->
        <div class="mb-3">
          <label for="title" class="form-label">Assignment Title *</label>
          <input
            type="text"
            class="form-control bg-dark text-light border-secondary"
            id="title"
            name="title"
            value="<%= assignment.title %>"
            required
          >
        </div>

        <!-- due date -->
        <div class="mb-3">
          <label for="dueDate" class="form-label">Due Date *</label>
          <input
            type="date"
            class="form-control bg-dark text-light border-secondary"
            id="dueDate"
            name="dueDate"
            value="<%= new Date(assignment.dueDate).toISOString().split('T')[0] %>"
            required
          >
        </div>

        <!-- status + priority -->
        <div class="row">

          <!-- assignment status -->
          <div class="col-md-6 mb-3">
            <label for="status" class="form-label">Status *</label>
            <select
              class="form-select bg-dark text-light border-secondary"
              id="status"
              name="status"
              required
            >
              <option value="Not Started" <%= assignment.status === "Not Started" ? "selected" : "" %>>Not Started</option>
              <option value="In Progress" <%= assignment.status === "In Progress" ? "selected" : "" %>>In Progress</option>
              <option value="Completed" <%= assignment.status === "Completed" ? "selected" : "" %>>Completed</option>
            </select>
          </div>

          <!-- priority level -->
          <div class="col-md-6 mb-3">
            <label for="priority" class="form-label">Priority *</label>
            <select
              class="form-select bg-dark text-light border-secondary"
              id="priority"
              name="priority"
              required
            >
              <option value="Low" <%= assignment.priority === "Low" ? "selected" : "" %>>Low</option>
              <option value="Medium" <%= assignment.priority === "Medium" ? "selected" : "" %>>Medium</option>
              <option value="High" <%= assignment.priority === "High" ? "selected" : "" %>>High</option>
            </select>
          </div>

        </div>

        <!-- assignment description -->
        <div class="mb-3">
          <label for="description" class="form-label">Description (Optional)</label>
          <textarea
            class="form-control bg-dark text-light border-secondary"
            id="description"
            name="description"
            rows="4"
          ><%= assignment.description %></textarea>
        </div>

        <!-- update + cancel buttons -->
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">Update Assignment</button>
          <a href="/assignments" class="btn btn-outline-light">Cancel</a>
        </div>

      </form>

    </div>
  </div>
</section>

<!-- include footer -->
<%- include("partials/footer") %>

